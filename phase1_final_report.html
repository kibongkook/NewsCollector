<!DOCTYPE html>
<html lang="ko">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>Phase 1 최종 리포트 - 이미지 처리 개선</title>
    <style>
        * { margin: 0; padding: 0; box-sizing: border-box; }
        body { font-family: -apple-system, BlinkMacSystemFont, "Segoe UI", sans-serif; background: #f5f5f5; padding: 20px; }
        .container { max-width: 1400px; margin: 0 auto; }
        .header { background: linear-gradient(135deg, #667eea 0%, #764ba2 100%); color: white; padding: 40px; border-radius: 12px; margin-bottom: 30px; }
        .header h1 { font-size: 32px; margin-bottom: 10px; }
        .header p { opacity: 0.9; }

        .summary { background: white; padding: 30px; border-radius: 8px; box-shadow: 0 2px 4px rgba(0,0,0,0.1); margin-bottom: 30px; }
        .summary h2 { margin-bottom: 20px; color: #333; }
        .summary-grid { display: grid; grid-template-columns: repeat(auto-fit, minmax(300px, 1fr)); gap: 20px; }
        .summary-card { padding: 20px; background: #f9f9f9; border-radius: 8px; border-left: 4px solid #667eea; }
        .summary-card h3 { color: #666; font-size: 14px; margin-bottom: 10px; text-transform: uppercase; }
        .summary-card .value { font-size: 24px; font-weight: bold; color: #333; margin-bottom: 5px; }
        .summary-card .desc { color: #999; font-size: 13px; }

        .section { background: white; padding: 30px; border-radius: 8px; box-shadow: 0 2px 4px rgba(0,0,0,0.1); margin-bottom: 30px; }
        .section h2 { margin-bottom: 20px; color: #333; border-bottom: 2px solid #eee; padding-bottom: 10px; }

        table { width: 100%; border-collapse: collapse; margin-top: 20px; }
        thead { background: #f9f9f9; }
        th { padding: 15px; text-align: left; font-size: 13px; color: #666; font-weight: 600; text-transform: uppercase; border-bottom: 2px solid #eee; }
        td { padding: 15px; border-bottom: 1px solid #f0f0f0; }

        .badge { display: inline-block; padding: 4px 12px; border-radius: 12px; font-size: 11px; font-weight: 600; text-transform: uppercase; }
        .badge-success { background: #d1fae5; color: #065f46; }
        .badge-warning { background: #fef3c7; color: #92400e; }
        .badge-danger { background: #fee2e2; color: #991b1b; }
        .badge-info { background: #dbeafe; color: #1e40af; }

        .comparison { display: grid; grid-template-columns: repeat(3, 1fr); gap: 20px; margin-top: 20px; }
        .comparison-card { background: #f9f9f9; padding: 20px; border-radius: 8px; text-align: center; }
        .comparison-card h3 { font-size: 14px; color: #666; margin-bottom: 15px; }
        .comparison-card .label { font-size: 12px; color: #999; margin-bottom: 5px; }
        .comparison-card .value { font-size: 28px; font-weight: bold; margin-bottom: 10px; }
        .comparison-card .change { font-size: 14px; padding: 4px 8px; border-radius: 4px; display: inline-block; }
        .change-up { background: #fee2e2; color: #991b1b; }
        .change-down { background: #d1fae5; color: #065f46; }

        .code-block { background: #2d2d2d; color: #f8f8f2; padding: 20px; border-radius: 8px; overflow-x: auto; margin-top: 15px; }
        .code-block code { font-family: 'Courier New', monospace; font-size: 14px; }

        .achievement { padding: 15px 20px; background: #d1fae5; border-left: 4px solid #10b981; border-radius: 8px; margin-bottom: 15px; }
        .achievement h4 { color: #065f46; margin-bottom: 5px; font-size: 16px; }
        .achievement p { color: #047857; font-size: 14px; }

        .issue { padding: 15px 20px; background: #fef3c7; border-left: 4px solid #f59e0b; border-radius: 8px; margin-bottom: 15px; }
        .issue h4 { color: #92400e; margin-bottom: 5px; font-size: 16px; }
        .issue p { color: #b45309; font-size: 14px; }

        .next-steps { background: linear-gradient(135deg, #06b6d4 0%, #3b82f6 100%); color: white; padding: 30px; border-radius: 8px; margin-top: 30px; }
        .next-steps h2 { margin-bottom: 20px; }
        .next-steps ul { list-style-position: inside; line-height: 2; }
    </style>
</head>
<body>
    <div class="container">
        <div class="header">
            <h1>Phase 1 최종 리포트</h1>
            <p>이미지 처리 개선: 중복 제거 + 타입별 개수 제한 + 타입 감지 최적화</p>
            <p>총 90회 테스트 (3회 반복 x 30회)</p>
        </div>

        <div class="summary">
            <h2>전체 요약</h2>
            <div class="summary-grid">
                <div class="summary-card">
                    <h3>총 테스트 횟수</h3>
                    <div class="value">90회</div>
                    <div class="desc">3회 반복 테스트 (각 30회)</div>
                </div>
                <div class="summary-card">
                    <h3>성공률</h3>
                    <div class="value" style="color: #10b981;">100%</div>
                    <div class="desc">모든 테스트 성공 (90/90)</div>
                </div>
                <div class="summary-card">
                    <h3>평균 품질 점수</h3>
                    <div class="value" style="color: #3b82f6;">92.5점</div>
                    <div class="desc">목표: 90점 이상</div>
                </div>
                <div class="summary-card">
                    <h3>평균 생성시간</h3>
                    <div class="value">6.1초</div>
                    <div class="desc">양호 (10초 미만)</div>
                </div>
            </div>
        </div>

        <div class="section">
            <h2>타입 분포 변화 추이</h2>
            <table>
                <thead>
                    <tr>
                        <th>반복</th>
                        <th>Standard (목표 80%)</th>
                        <th>Visual (목표 15%)</th>
                        <th>Data (목표 5%)</th>
                        <th>평균 점수</th>
                        <th>평균 길이</th>
                    </tr>
                </thead>
                <tbody>
                    <tr>
                        <td><strong>1차 테스트</strong><br><span style="font-size: 12px; color: #999;">기본 설정</span></td>
                        <td>56.7% <span class="badge badge-warning">-23.3%p</span></td>
                        <td>20.0% <span class="badge badge-warning">+5%p</span></td>
                        <td>23.3% <span class="badge badge-danger">+18.3%p</span></td>
                        <td>93.5점</td>
                        <td>690자</td>
                    </tr>
                    <tr>
                        <td><strong>2차 테스트</strong><br><span style="font-size: 12px; color: #999;">Data 타입 엄격화</span></td>
                        <td>96.7% <span class="badge badge-warning">+16.7%p</span></td>
                        <td>3.3% <span class="badge badge-danger">-11.7%p</span></td>
                        <td>0% <span class="badge badge-success">-5%p</span></td>
                        <td>92.3점</td>
                        <td>640자</td>
                    </tr>
                    <tr>
                        <td><strong>3차 테스트</strong><br><span style="font-size: 12px; color: #999;">균형 조정</span></td>
                        <td>33.3% <span class="badge badge-danger">-46.7%p</span></td>
                        <td>56.7% <span class="badge badge-danger">+41.7%p</span></td>
                        <td>10.0% <span class="badge badge-warning">+5%p</span></td>
                        <td>91.8점</td>
                        <td>649자</td>
                    </tr>
                </tbody>
            </table>
        </div>

        <div class="section">
            <h2>Phase 1 핵심 개선사항</h2>

            <div class="achievement">
                <h4>✅ 1. 중복 이미지 제거 강화</h4>
                <p>도메인 무시, 경로만 비교하여 같은 이미지가 다른 CDN에서 오더라도 중복 감지</p>
                <div class="code-block">
<code>// Before: https://cdn1.com/news/photo.jpg?w=800 → https://cdn1.com/news/photo.jpg
// After:  https://cdn1.com/news/photo.jpg → /news/photo.jpg
//         https://cdn2.com/news/photo.jpg → /news/photo.jpg (중복!)</code>
                </div>
            </div>

            <div class="achievement">
                <h4>✅ 2. 타입별 이미지 개수 제한</h4>
                <p>뉴스 타입에 맞는 적정 이미지 개수 설정</p>
                <ul style="margin-top: 10px; margin-left: 20px; line-height: 1.8;">
                    <li>Standard: 최대 5장 (평균 3.9장 달성)</li>
                    <li>Visual: 최대 8장 (평균 6.2장 달성)</li>
                    <li>Data: 최대 3장 (평균 2.9장 달성)</li>
                </ul>
            </div>

            <div class="achievement">
                <h4>✅ 3. Data 타입 과다 검출 해결</h4>
                <p>숫자 밀도 기준 상향 + 패턴 매칭 기준 강화</p>
                <ul style="margin-top: 10px; margin-left: 20px; line-height: 1.8;">
                    <li>numeric_density_min: 5% → 8-10%</li>
                    <li>pattern_match_threshold: 3개 → 4-5개</li>
                    <li>일반적 패턴 제거 ('증가|감소|상승|하락')</li>
                    <li>결과: 23.3% → 0-10% (목표 5% 근접)</li>
                </ul>
            </div>
        </div>

        <div class="section">
            <h2>남은 과제</h2>

            <div class="issue">
                <h4>⚠️ 1. 타입 분포 균형 미달성</h4>
                <p>이미지 개수만으로는 Visual 타입 정확한 판별 어려움</p>
                <ul style="margin-top: 10px; margin-left: 20px; line-height: 1.8;">
                    <li>image_count_min 7장 → Visual 3.3% (너무 낮음)</li>
                    <li>image_count_min 5장 → Visual 56.7% (너무 높음)</li>
                    <li>근본 원인: 이미지 메타데이터 부족 (alt, title, 위치 정보 없음)</li>
                </ul>
            </div>

            <div class="issue">
                <h4>⚠️ 2. 본문 길이 편차</h4>
                <p>BODY_TOO_SHORT/LONG 이슈 지속 발생</p>
                <ul style="margin-top: 10px; margin-left: 20px; line-height: 1.8;">
                    <li>BODY_TOO_SHORT: 평균 3-4건 (키워드에 따라 편차 큼)</li>
                    <li>BODY_TOO_LONG: 평균 2-5건 (검증 기준 완화 필요)</li>
                </ul>
            </div>
        </div>

        <div class="next-steps">
            <h2>Next Step: Phase 2 이미지 메타데이터 수집</h2>
            <p style="margin-bottom: 20px;">Phase 1에서 달성하지 못한 타입 분포 목표를 Phase 2에서 해결합니다.</p>
            <ul>
                <li><strong>ImageInfo dataclass</strong>: URL뿐 아니라 alt, title, class, position 수집</li>
                <li><strong>이미지 연관성 점수 시스템</strong>: alt text와 뉴스 제목/키워드 매칭도 계산</li>
                <li><strong>HTML 구조 분석</strong>: article 내부 여부, class명 기반 중요도 판단</li>
                <li><strong>Visual 타입 정확도 향상</strong>: 이미지 개수 + 메타데이터 조합으로 판별</li>
                <li><strong>테스트 50회 이상</strong>: 개선 효과 검증 및 최종 리포트 생성</li>
            </ul>
        </div>
    </div>
</body>
</html>
